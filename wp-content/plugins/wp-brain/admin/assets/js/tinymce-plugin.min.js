!function(n){tinymce.create("tinymce.plugins.WPBrain",{init:function(r,n){r.addButton("wpbrain",{icon:"wp-brain",type:"menubutton",tooltip:"WP Brain Shortcodes",menu:[{text:"Filter Value",icon:"wp-brain wp_brain_if",menu:e()},{text:"WP Brain IF",icon:"wp-brain wp_brain_if",onclick:function(){r.execCommand("wp_brain_if",{preset:"0"})}},{text:"WP Brain ELSE IF",icon:"wp-brain wp_brain_elseif",onclick:function(){r.execCommand("wp_brain_elseif",{preset:"0"})}},{text:"WP Brain ELSE",icon:"wp-brain wp_brain_else",onclick:function(){r.execCommand("wp_brain_else")}},{text:"WP Brain Loop",icon:"wp-brain wp_brain_loop",onclick:function(){r.execCommand("wp_brain_loop",{from:"1",to:"5",step:"1"})}},{text:"WP Brain Include",icon:"wp-brain wp_brain_include",onclick:function(){r.execCommand("wp_brain_include")}},{text:"WP Brain Redirect",icon:"wp-brain wp_brain_redirect",onclick:function(){r.execCommand("wp_brain_redirect")}},{text:"WP Brain Action",icon:"wp-brain wp_brain_action",onclick:function(){r.execCommand("wp_brain_action")}},{text:"WP Brain Function",icon:"wp-brain wp_brain_function",onclick:function(){r.execCommand("wp_brain_function")}}]});function e(){var n={};var e=null;for(i in wpbrain.filters){e=wpbrain.filters[i];if(n.hasOwnProperty(e.optgroup)){n[e.optgroup].push(e)}else{n[e.optgroup]=[e]}}var t=[];for(i in n){var a=n[i];var o={text:i,menu:[]};for(j in a){e=a[j];o.menu.push({text:e.label,value:e.id,onclick:function(){r.execCommand("wp_brain_filter_value",this.value())}})}t.push(o)}return t}r.addCommand("wp_brain_filter_value",function(n){var e='[wp_brain_filter_value filter="'+n+'"]';r.insertContent(e)});r.addCommand("wp_brain_if",function(n){var e=[{value:"",text:""}];for(i in wpbrain.presets){var t=wpbrain.presets[i];e.push({value:t.id,text:t.name})}r.windowManager.open({title:"WP Brain IF",width:500,height:70,body:[{type:"listbox",name:"preset",label:"Preset",values:e,value:n.preset}],onsubmit:function(n){var e=r.selection.getContent();e=e?e:"content";var i='[wp_brain_if preset="'+n.data.preset+'"]'+e+"[/wp_brain_if]";r.insertContent(i)}})});r.addCommand("wp_brain_elseif",function(n){var e=[{value:"",text:""}];for(i in wpbrain.presets){var t=wpbrain.presets[i];e.push({value:t.id,text:t.name})}r.windowManager.open({title:"WP Brain ELSE IF",width:500,height:70,body:[{type:"listbox",name:"preset",label:"Preset",values:e,value:n.preset}],onsubmit:function(n){var e=r.selection.getContent();e=e?e:"content";var i='[wp_brain_elseif preset="'+n.data.preset+'"]'+e+"[/wp_brain_elseif]";r.insertContent(i)}})});r.addCommand("wp_brain_else",function(){var n=r.selection.getContent();n=n?n:"content";var e="[wp_brain_else]"+n+"[/wp_brain_else]";r.insertContent(e)});r.addCommand("wp_brain_loop",function(n){r.windowManager.open({title:"WP Brain Loop",width:500,height:150,body:[{type:"textbox",name:"from",label:"Loop from",value:n.from},{type:"textbox",name:"to",label:"Loop to",value:n.to},{type:"textbox",name:"step",label:"step",value:n.step}],onsubmit:function(n){var e="";for(i in n.data){e+=" "+i+'="'+n.data[i]+'"'}var t=r.selection.getContent();t=t?t:"%index";var a="[wp_brain_loop"+e+"]"+t+"[/wp_brain_loop]";r.insertContent(a)}})});r.addCommand("wp_brain_include",function(){r.windowManager.open({title:"WP Brain Include",width:500,minHeight:70,body:[{type:"textbox",name:"file",label:"Include file"}],onsubmit:function(n){var e='[wp_brain_include file="'+n.data.file+'"]';r.insertContent(e)}})});r.addCommand("wp_brain_redirect",function(){r.windowManager.open({title:"WP Brain Redirect",width:500,minHeight:70,body:[{type:"textbox",name:"url",label:"Redirect to"}],onsubmit:function(n){var e='[wp_brain_redirect url="'+n.data.url+'"]';r.insertContent(e)}})});r.addCommand("wp_brain_action",function(){r.windowManager.open({title:"WP Brain Action",width:500,minHeight:70,body:[{type:"textbox",name:"name",label:"Action name"}],onsubmit:function(n){var e='[wp_brain_action name="'+n.data.name+'"]';r.insertContent(e)}})});r.addCommand("wp_brain_function",function(){r.windowManager.open({title:"WP Brain Function",width:500,minHeight:70,body:[{type:"textbox",name:"name",label:"Function name"}],onsubmit:function(n){var e='[wp_brain_action name="'+n.data.name+'"]';r.insertContent(e)}})})},createControl:function(n,e){return null}});tinymce.PluginManager.add("wpbrain",tinymce.plugins.WPBrain)}(jQuery);