// jquery.repeater version 1.2.1 (modified)
// https://github.com/DubFriend/jquery.repeater
!function(t){"use strict";var e,n,r,i=function(e){return t.isArray(e)},u=function(t){return!i(t)&&t instanceof Object},a=function(t){return t instanceof Function},c=function(e,n){return t.inArray(n,e)},o=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)},f=function(t,e){var n=[];return o(t,function(t,r,i){n.push(e(t,r,i))}),n},s=function(t,e,n){return i(t)?f(t,e):(r=e,u=n,a={},o(t,function(t,e,n){e=u?u(e,t):e,a[e]=r(t,e,n)}),a);var r,u,a},p=function(t,e,n){return s(t,function(t,r){return t[e].apply(t,n||[])})},l=(e=0,r=function(t){var e,n,r,i,u,a,c="",o="",f=(i=-1!==t.indexOf("#"),u=-1!==t.indexOf("?"),a="",u&&(a=t.split("?")[1]||"",i&&(a=a.split("#")[0]||"")),c=u?t.split("?")[0]||"":i?t.split("#")[0]||"":t,i&&(o=t.split("#")[1]||""),a?a.split("&"):[]),s={};for(r=0;r<f.length;r+=1)e=f[r].split("=")[0],n=f[r].split("=")[1],s[e]=n;return{url:c||"",hash:o||"",parameters:s}},(n={}).get=function(t){return r(t).parameters},n.set=function(t,e){var n,i,u=r(t);return u.parameters=function(){var t,e={};for(t=0;t<arguments.length;t+=1)o(arguments[t],function(t,n){e[n]=t});return e}(u.parameters,e),i=[],o((n=u).parameters,function(t,e){i.push(e+"="+n.parameters[e])}),n.url+(i.length>0?"?"+i.join("&"):"")+(n.hash?"#"+n.hash:"")},function(t){var e=Array.prototype.slice.call(arguments,1);if(a(t));}(function(e,n,r){return t(e+(r?"-"+r:"")+(n?"-"+n:""))},".frm"),function(t,e){var n,r,i,u=(r={},(n=n||{}).publish=function(t,e){o(r[t],function(t){t(e)})},n.subscribe=function(t,e){r[t]=r[t]||[],r[t].push(e)},n.unsubscribe=function(t){o(r,function(e){var n=c(e,t);-1!==n&&e.splice(n,1)})},n),a=t.$;return u.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},u.$=function(t){return t?a.find(t):a},u.disable=function(){u.$().prop("disabled",!0),u.publish("isEnabled",!1)},u.enable=function(){u.$().prop("disabled",!1),u.publish("isEnabled",!0)},e.equalTo=function(t,e){return t===e},e.publishChange=function(t,n){var r=u.get();e.equalTo(r,i)||u.publish("change",{e:t,domElement:n}),i=r},u}),h=function(t,e){var n=l(t,e);return n.get=function(){return n.$().val()},n.set=function(t){n.$().val(t)},n.clear=function(){n.set("")},e.buildSetter=function(t){return function(e){t.call(n,e)}},n},d=function(t,e){t=i(t)?t:[t],e=i(e)?e:[e];var n=!0;return t.length!==e.length?n=!1:o(t,function(t){-1===c(e,t)&&(n=!1)}),n},v=function(t){var e={},n=h(t,e);return n.getType=function(){return"button"},n.$().on("change",function(t){e.publishChange(t,this)}),n},m=function(e){var n={},r=h(e,n);return r.getType=function(){return"checkbox"},r.get=function(){var e=[];return r.$().filter(":checked").each(function(){e.push(t(this).val())}),e},r.set=function(e){e=i(e)?e:[e],r.$().each(function(){t(this).prop("checked",!1)}),o(e,function(t){r.$().filter('[value="'+t+'"]').prop("checked",!0)})},n.equalTo=d,r.$().change(function(t){n.publishChange(t,this)}),r},g=function(t){var e=V(t,{});return e.getType=function(){return"email"},e},y=function(e){var n={},r=l(e,n);return r.getType=function(){return"file"},r.get=function(){return(t=r.$().val().split("\\"))[t.length-1];var t},r.clear=function(){this.$().each(function(){t(this).wrap("<form>").closest("form").get(0).reset(),t(this).unwrap()})},r.$().change(function(t){n.publishChange(t,this)}),r},b=function(t){var e={},n=h(t,e);return n.getType=function(){return"hidden"},n.$().change(function(t){e.publishChange(t,this)}),n},$=function(e){var n={},r=l(e,n);return r.getType=function(){return"file[multiple]"},r.get=function(){var t,e=r.$().get(0).files||[],n=[];for(t=0;t<(e.length||0);t+=1)n.push(e[t].name);return n},r.clear=function(){this.$().each(function(){t(this).wrap("<form>").closest("form").get(0).reset(),t(this).unwrap()})},r.$().change(function(t){n.publishChange(t,this)}),r},k=function(t){var e={},n=h(t,e);return n.getType=function(){return"select[multiple]"},n.get=function(){return n.$().val()||[]},n.set=function(t){n.$().val(""===t?[]:i(t)?t:[t])},e.equalTo=d,n.$().change(function(t){e.publishChange(t,this)}),n},x=function(t){var e=V(t,{});return e.getType=function(){return"password"},e},T=function(e){var n={},r=h(e,n);return r.getType=function(){return"radio"},r.get=function(){return r.$().filter(":checked").val()||null},r.set=function(e){e?r.$().filter('[value="'+e+'"]').prop("checked",!0):r.$().each(function(){t(this).prop("checked",!1)})},r.$().change(function(t){n.publishChange(t,this)}),r},w=function(t){var e={},n=h(t,e);return n.getType=function(){return"range"},n.$().change(function(t){e.publishChange(t,this)}),n},C=function(t){var e={},n=h(t,e);return n.getType=function(){return"select"},n.$().change(function(t){e.publishChange(t,this)}),n},V=function(t){var e={},n=h(t,e);return n.getType=function(){return"text"},n.$().on("change keyup keydown",function(t){e.publishChange(t,this)}),n},O=function(t){var e={},n=h(t,e);return n.getType=function(){return"textarea"},n.$().on("change keyup keydown",function(t){e.publishChange(t,this)}),n},A=function(t){var e=V(t,{});return e.getType=function(){return"url"},e},E=function(e){var n={},r=e.$,i=e.constructorOverride||{button:v,text:V,url:A,email:g,password:x,range:w,textarea:O,select:C,"select[multiple]":k,radio:T,checkbox:m,file:y,"file[multiple]":$,hidden:b},a=function(e,a){(u(a)?a:r.find(a)).each(function(){var r=t(this).attr("name");n[r]=i[e]({$:t(this)})})},f=function(e,a){var f=[],s=u(a)?a:r.find(a);u(a)?n[s.attr("name")]=i[e]({$:s}):(s.each(function(){t(this).attr("name");-1===c(f,t(this).attr("name"))&&f.push(t(this).attr("name"))}),o(f,function(t){n[t]=i[e]({$:r.find('input[name="'+t+'"]')})}))};return r.is("input, select, textarea")?r.is('input[type="button"], button, input[type="submit"]')?a("button",r):r.is("textarea")?a("textarea",r):r.is('input[type="text"]')||r.is("input")&&!r.attr("type")?a("text",r):r.is('input[type="password"]')?a("password",r):r.is('input[type="email"]')?a("email",r):r.is('input[type="url"]')?a("url",r):r.is('input[type="range"]')?a("range",r):r.is("select")?r.is("[multiple]")?a("select[multiple]",r):a("select",r):r.is('input[type="file"]')?r.is("[multiple]")?a("file[multiple]",r):a("file",r):r.is('input[type="hidden"]')?a("hidden",r):r.is('input[type="radio"]')?f("radio",r):r.is('input[type="checkbox"]')?f("checkbox",r):a("text",r):(a("button",'input[type="button"], button, input[type="submit"]'),a("text",'input[type="text"]'),a("password",'input[type="password"]'),a("email",'input[type="email"]'),a("url",'input[type="url"]'),a("range",'input[type="range"]'),a("textarea","textarea"),a("select","select:not([multiple])"),a("select[multiple]","select[multiple]"),a("file",'input[type="file"]:not([multiple])'),a("file[multiple]",'input[type="file"][multiple]'),a("hidden",'input[type="hidden"]'),f("radio",'input[type="radio"]'),f("checkbox",'input[type="checkbox"]')),n};t.fn.inputVal=function(e){var n=t(this),r=E({$:n});return n.is("input, textarea, select")?void 0===e?r[n.attr("name")].get():(r[n.attr("name")].set(e),n):void 0===e?p(r,"get"):(o(e,function(t,e){r[e].set(t)}),n)},t.fn.inputOnChange=function(e){var n=t(this),r=E({$:n});return o(r,function(t){t.subscribe("change",function(t){e.call(t.domElement,t.e)})}),n},t.fn.inputDisable=function(){var e=t(this);return p(E({$:e}),"disable"),e},t.fn.inputEnable=function(){var e=t(this);return p(E({$:e}),"enable"),e},t.fn.inputClear=function(){var e=t(this);return p(E({$:e}),"clear"),e}}(jQuery),function(t){"use strict";var e=function(t){return t},n=function(e){return t.isArray(e)},r=function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)},i=function(){var t,e={};return r((t=arguments,Array.prototype.slice.call(t)),function(t){r(t,function(t,n){e[n]=t})}),e},u=function(t,e,i){return n(t)?(o=e,f=[],r(t,function(t,e,n){f.push(o(t,e,n))}),f):(u=e,a=i,c={},r(t,function(t,e,n){e=a?a(e,t):e,c[e]=u(t,e,n)}),c);var u,a,c,o,f};t.fn.repeaterVal=function(){var e,n,i=function(t){if(1===t.length&&(0===t[0].key.length||1===t[0].key.length&&!t[0].key[0]))return t[0].val;r(t,function(t){t.head=t.key.shift()});var e,n,u=(e={},r(t,function(t){e[t.head]||(e[t.head]=[]),e[t.head].push(t)}),e);return/^[0-9]+$/.test(t[0].head)?(n=[],r(u,function(t){n.push(i(t))})):(n={},r(u,function(t,e){n[e]=i(t)})),n};return i((e=t(this).inputVal(),n=[],r(e,function(t,e){var r=[];"undefined"!==e&&(r.push(e.match(/^[^\[]*/)[0]),r=r.concat(u(e.match(/\[[^\]]*\]/g),function(t){return t.replace(/[\[\]]/g,"")})),n.push({val:t,key:r}))}),n))},t.fn.repeater=function(a){var c;return a=a||{},t(this).each(function(){var o=t(this),f=a.show||function(){t(this).show()},s=a.hide||function(t){t()},p=o.find("[data-repeater-list]").first(),l=function(e,n){return e.filter(function(){return!n||0===t(this).closest((e=n,r="selector",u(e,function(t){return t[r]})).join(",")).length;var e,r})},h=function(){return l(p.find("[data-repeater-item]"),a.repeaters)},d=t(o.find("script[data-repeater-template]").html());d.length||(d=p.find("[data-repeater-item]").first().clone().hide());var v=l(l(t(this).find("[data-repeater-item]"),a.repeaters).first().find("[data-repeater-delete]"),a.repeaters);a.isFirstItemUndeletable&&v&&v.remove();var m=function(){var t=p.data("repeater-list");return a.$parent?a.$parent.data("item-name")+"["+t+"]":t},g=function(e){a.repeaters&&e.each(function(){var e=t(this);r(a.repeaters,function(t){e.find(t.selector).repeater(i(t,{$parent:e}))})})},y=function(t,e,n){t&&r(t,function(t){n.call(e.find(t.selector)[0],t)})},b=function(e,n,r){e.each(function(e){var i=t(this);i.data("item-name",n+"["+e+"]"),l(i.find("[name]"),r).each(function(){var u=t(this);if(!u.closest("[data-repeater-noindex]").length){var a,c=u.attr("name").match(/\[[^\]]+\]/g),o=c?(a=c,a[a.length-1]).replace(/\[|\]/g,""):u.attr("name"),f=n+"["+e+"]["+o+"]"+(u.is(":checkbox")||u.attr("multiple")?"[]":"");u.attr("name",f),y(r,i,function(r){var i=t(this);b(l(i.find("[data-repeater-item]"),r.repeaters||[]),n+"["+e+"]["+i.find("[data-repeater-list]").first().data("repeater-list")+"]",r.repeaters)})}})}),p.find("input[name][checked]").removeAttr("checked").prop("checked",!0)};b(h(),m(),a.repeaters),g(h()),a.initEmpty&&h().remove(),a.ready&&a.ready(function(){b(h(),m(),a.repeaters)});var $,k=($=function(i,c,o){if(c||a.defaultValues){var f={};l(i.find("[name]"),o).each(function(){var e=t(this).attr("name").match(/\[([^\]]*)(\]|\]\[\])$/)[1];f[e]=t(this).attr("name")}),i.inputVal(u((s=c||a.defaultValues,p=function(t,e){return f[e]},n(s)?(h=[],r(s,function(t,e,n){p(t,e,n)&&h.push(t)})):(h={},r(s,function(t,e,n){p(t,e,n)&&(h[e]=t)})),h),e,function(t){return f[t]}))}var s,p,h;y(o,i,function(e){var n=t(this);l(n.find("[data-repeater-item]"),e.repeaters).each(function(){var i=n.find("[data-repeater-list]").data("repeater-list");if(c&&c[i]){var u=t(this).clone();n.find("[data-repeater-item]").remove(),r(c[i],function(t){var r=u.clone();$(r,t,e.repeaters||[]),n.find("[data-repeater-list]").append(r)})}else $(t(this),e.defaultValues,e.repeaters||[])})})},function(e,n){p.append(e),b(h(),m(),a.repeaters),e.find("[name]").each(function(){t(this).inputClear()}),$(e,n||a.defaultValues,a.repeaters)}),x=function(t){var e=d.clone();k(e,t),a.repeaters&&g(e),f.call(e.get(0))};c=function(t){h().remove(),r(t,x)},l(o.find("[data-repeater-create]"),a.repeaters).click(function(){x()}),p.on("click","[data-repeater-delete]",function(){var e=t(this).closest("[data-repeater-item]").get(0);s.call(e,function(){t(e).remove(),b(h(),m(),a.repeaters)})})}),this.setList=c,this}}(jQuery);