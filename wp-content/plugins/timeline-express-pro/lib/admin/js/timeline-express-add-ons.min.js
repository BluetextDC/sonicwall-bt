/*
 * @Plugin Timeline Express Pro
 * @Author Code Parrots
 * @Site https://www.wp-timelineexpress.com
 * @Version 2.2.7
 * @Build 11-03-2018
 */
var cnkt_installer=cnkt_installer||{},alertStyle="margin: 12px 20px 2px; padding: 10px; border: 1px solid transparent; border-radius: 3px;";warningStyle="color: #a94442; border-color: #ebccd1; background-color: #f2dede;",successStyle="color: #3c763d; border-color: #d6e9c6; background-color: #dff0d8;",jQuery(document).ready(function(a){"use strict";var b=!1;cnkt_installer.install_plugin=function(c,d){confirm(te_installer_localize.install_now)&&(b=!0,c.addClass("installing"),a.ajax({type:"POST",url:ajaxurl,data:{action:"timeline_express_add_on_installer",plugin:d,nonce:te_installer_localize.admin_nonce,dataType:"json"},success:function(a){a&&"success"===a.status?(c.attr("class","activate button button-primary"),c.html(te_installer_localize.activate_btn)):c.removeClass("installing"),b=!1},error:function(a,d,e){console.log(d),c.removeClass("installing"),b=!1}}))},cnkt_installer.activate_plugin=function(c,d){c.attr("disabled","disabled"),a.ajax({type:"POST",url:ajaxurl,data:{action:"timeline_express_add_on_activation",plugin:d,pluginName:c.data("name"),premium:c.hasClass("premium"),nonce:te_installer_localize.admin_nonce,dataType:"json"},success:function(d){if(!d.success)return c.closest(".plugin-card").prepend('<p class="plugin-alert" style="'+alertStyle+warningStyle+'">'+d.data.msg+"</p>"),c.removeAttr("disabled"),void(b=!1);c.closest(".plugin-card").prepend('<p class="plugin-alert" style="'+alertStyle+successStyle+'">'+d.data.msg+"</p>");var e=c.closest(".plugin-card").find(".plugin-alert");c.attr("class","installed button disabled"),c.html(te_installer_localize.installed_btn),b=!1,setTimeout(function(){e.fadeOut("_default",function(){a(this).remove()})},4e3)},error:function(a,d,e){console.log(a),console.log(d),console.log(e),c.removeAttr("disabled"),b=!1}})},a(document).on("click",".plugin-card a.button",function(c){var d=a(this),e=d.data("slug");b||d.hasClass("disabled")||(c.preventDefault(),d.hasClass("install")&&cnkt_installer.install_plugin(d,e),d.hasClass("activate")&&cnkt_installer.activate_plugin(d,e))})});